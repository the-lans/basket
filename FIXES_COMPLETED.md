# –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö –∏–≥—Ä—ã "–ë–∞—Å–∫–µ—Ç"

**–î–∞—Ç–∞:** 15 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –û—à–∏–±–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ –∏–∑ –ø–∞—É–∑—ã (–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø)

**–ü—Ä–æ–±–ª–µ–º–∞:**  
–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ ESC ‚Üí "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å" –∏–≥—Ä–∞ –ø–∞–¥–∞–ª–∞ —Å –æ—à–∏–±–∫–æ–π:
```
TypeError: Cannot read properties of undefined (reading 'difficulty')
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- ‚úÖ `PauseScene.js` - –¥–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ `returnPayload` (—Å—Ç—Ä–æ–∫–∞ 20)
- ‚úÖ `PauseScene.js` - –ø–µ—Ä–µ–¥–∞—á–∞ `returnPayload` –æ–±—Ä–∞—Ç–Ω–æ –≤ GameScene (—Å—Ç—Ä–æ–∫–∏ 69, 73, 83)
- ‚úÖ `GameScene.js` - –ø–µ—Ä–µ–¥–∞—á–∞ settings –≤ pause payload (—Å—Ç—Ä–æ–∫–∏ 362-366)
- ‚úÖ `GameScene.js` - fallback –Ω–∞ `this.game.settings` (—Å—Ç—Ä–æ–∫–∞ 39)
- ‚úÖ `Game.js` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (—Å—Ç—Ä–æ–∫–∞ 36)

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `src/scenes/PauseScene.js`
- `src/scenes/GameScene.js`
- `src/core/Game.js`

---

### 2. –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è

**–ü—Ä–æ–±–ª–µ–º–∞:**  
–ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ –±—ã–ª–æ —Å–º–µ—â–µ–Ω–æ –≤–ª–µ–≤–æ, –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- ‚úÖ `Projection.js` - –∏–∑–º–µ–Ω–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `getCameraOffset()` (—Å—Ç—Ä–æ–∫–∏ 65-79)
- –ö–∞–º–µ—Ä–∞ —Ç–µ–ø–µ—Ä—å —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –∏–≥—Ä–æ–≤–æ–π –∑–æ–Ω–µ: `courtCenterY = LENGTH * 0.45`
- –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –æ–±–µ–∏–º –æ—Å—è–º: `offsetY = canvasHeight * 0.5`

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `src/core/Projection.js`

---

### 3. –í–∏–¥–∏–º–æ—Å—Ç—å –∫–æ—Ä–∑–∏–Ω—ã

**–ü—Ä–æ–±–ª–µ–º–∞:**  
–ö–æ—Ä–∑–∏–Ω–∞ –Ω–µ –±—ã–ª–∞ –≤–∏–¥–Ω–∞ –Ω–∞ —ç–∫—Ä–∞–Ω–µ.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚úÖ `CourtRenderer.js` - —É–≤–µ–ª–∏—á–µ–Ω —Ä–∞–¥–∏—É—Å –∫–æ–ª—å—Ü–∞ –≤ 2 —Ä–∞–∑–∞ (—Å—Ç—Ä–æ–∫–∞ 301)
- ‚úÖ `CourtRenderer.js` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–µ–Ω—å –∫–æ–ª—å—Ü–∞ –¥–ª—è –≥–ª—É–±–∏–Ω—ã (—Å—Ç—Ä–æ–∫–∏ 297-301)
- ‚úÖ `CourtRenderer.js` - —É–ª—É—á—à–µ–Ω–∞ –≤–∏–¥–∏–º–æ—Å—Ç—å —â–∏—Ç–∞:
  - –ë–æ–ª–µ–µ –∑–∞–º–µ—Ç–Ω—ã–π —Ü–≤–µ—Ç: `rgba(255, 255, 255, 0.4)` (—Å—Ç—Ä–æ–∫–∞ 288)
  - –£–≤–µ–ª–∏—á–µ–Ω–∞ —Ç–æ–ª—â–∏–Ω–∞ –ª–∏–Ω–∏–π: `lineWidth = 4` (—Å—Ç—Ä–æ–∫–∞ 290)
  - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã: 60x40px (—Å—Ç—Ä–æ–∫–∏ 292-293)
- ‚úÖ `CourtRenderer.js` - –¥–æ–±–∞–≤–ª–µ–Ω–æ debug-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –∫–æ—Ä–∑–∏–Ω—ã (—Å—Ç—Ä–æ–∫–∏ 275-279)

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `src/game/CourtRenderer.js`

---

### 4. –ü–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –∏–≥—Ä–æ–∫–∞

**–ü—Ä–æ–±–ª–µ–º–∞:**  
–ò–≥—Ä–æ–∫ –Ω–µ –ø–æ–Ω–∏–º–∞–ª, —á—Ç–æ –º—è—á —É–∂–µ —É –Ω–µ–≥–æ –≤ –Ω–∞—á–∞–ª–µ –∏–≥—Ä—ã.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- ‚úÖ `HUD.js` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã –ø–æ–¥—Å–∫–∞–∑–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (—Å—Ç—Ä–æ–∫–∏ 170-176):
  - "–£ –≤–∞—Å –º—è—á! WASD ‚Äî –¥–≤–∏–∂–µ–Ω–∏–µ"
  - "–õ–ö–ú (—É–¥–µ—Ä–∂–∏–≤–∞—Ç—å) ‚Äî –±—Ä–æ—Å–æ–∫"

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `src/game/HUD.js`

---

## üìã –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä—ã
2. ‚úÖ –í—Å–µ –º–µ–Ω—é (–≥–ª–∞–≤–Ω–æ–µ, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
3. ‚úÖ –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
4. ‚úÖ –ò–∑–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –∫–æ—Ä—Ç–∞
5. ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (WASD, –¥–≤–∏–∂–µ–Ω–∏–µ)
6. ‚úÖ HUD —Å —Å—á–µ—Ç–æ–º –∏ –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏
7. ‚úÖ –õ–æ–≥–∏–∫–∞ –ø–æ–¥–±–æ—Ä–∞ –º—è—á–∞ (`handleBallPickup` –≤ GameScene)
8. ‚úÖ –ú—è—á –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç—Å—è –∫ –∏–≥—Ä–æ–∫—É –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
9. ‚úÖ –ü–∞—É–∑–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è (ESC)
10. ‚ö†Ô∏è –í–æ–∑–≤—Ä–∞—Ç –∏–∑ –ø–∞—É–∑—ã (—Ç—Ä–µ–±—É–µ—Ç hard refresh –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π)

---

## üîß –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—É–∑—ã:
1. –û—Ç–∫—Ä—ã—Ç—å –∏–≥—Ä—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. **–í–ê–ñ–ù–û:** –°–¥–µ–ª–∞—Ç—å Hard Refresh (Cmd+Shift+R –Ω–∞ Mac / Ctrl+Shift+F5 –Ω–∞ Windows)
3. –ù–∞–∂–∞—Ç—å "–ò–≥—Ä–∞—Ç—å"
4. –ù–∞–∂–∞—Ç—å ESC
5. –ù–∞–∂–∞—Ç—å "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å" –∏–ª–∏ ESC —Å–Ω–æ–≤–∞
6. ‚úÖ –ò–≥—Ä–∞ –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã:
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–≥—Ä—É
2. –ò—Å–∫–∞—Ç—å –æ—Ä–∞–Ω–∂–µ–≤–æ–µ –∫–æ–ª—å—Ü–æ —Å –Ω–µ–æ–Ω–æ–≤—ã–º —â–∏—Ç–æ–º –≤ –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏ –∫–æ—Ä—Ç–∞
3. –ö–æ—Ä–∑–∏–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤–∏–¥–Ω–∞ (—É–≤–µ–ª–∏—á–µ–Ω–∞ –≤ 2 —Ä–∞–∑–∞)

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. –ù–∞–∂–∞—Ç—å WASD - –∏–≥—Ä–æ–∫ –¥–æ–ª–∂–µ–Ω –¥–≤–∏–≥–∞—Ç—å—Å—è
2. –ú—è—á –≤–∏–¥–µ–Ω –æ–∫–æ–ª–æ –∏–≥—Ä–æ–∫–∞ (–≥–æ–ª—É–±–æ–≥–æ)
3. –í HUD –≤–Ω–∏–∑—É –≤–∏–¥–Ω—ã –ø–æ–¥—Å–∫–∞–∑–∫–∏: "–£ –≤–∞—Å –º—è—á! WASD ‚Äî –¥–≤–∏–∂–µ–Ω–∏–µ"

---

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
```
src/
  core/
    Game.js          - –î–æ–±–∞–≤–ª–µ–Ω—ã –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ settings
    Projection.js    - –£–ª—É—á—à–µ–Ω–æ —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–º–µ—Ä—ã
  
  scenes/
    GameScene.js     - Fallback –¥–ª—è settings, –ø–µ—Ä–µ–¥–∞—á–∞ –≤ pause
    PauseScene.js    - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –≤–æ–∑–≤—Ä–∞—Ç returnPayload
  
  game/
    CourtRenderer.js - –£–≤–µ–ª–∏—á–µ–Ω–∞ –≤–∏–¥–∏–º–æ—Å—Ç—å –∫–æ—Ä–∑–∏–Ω—ã
    HUD.js          - –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø–æ–¥—Å–∫–∞–∑–∫–∏
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è:
```javascript
// Projection.js:65-79
const courtCenterY = CONFIG.COURT.LENGTH * 0.45; // –§–æ–∫—É—Å –º–µ–∂–¥—É —Ü–µ–Ω—Ç—Ä–æ–º –∏ –∫–æ–ª—å—Ü–æ–º
const offsetX = canvasWidth / 2 - sx;            // –¶–µ–Ω—Ç—Ä –ø–æ X
const offsetY = canvasHeight * 0.5 - sy;         // –¶–µ–Ω—Ç—Ä –ø–æ Y
```

### –†–∞–∑–º–µ—Ä –∫–æ—Ä–∑–∏–Ω—ã:
```javascript
// CourtRenderer.js:301
const rimRadius = CONFIG.COURT.RIM_RADIUS * CONFIG.ISO.TILE_WIDTH * 2; // x2 –¥–ª—è –≤–∏–¥–∏–º–æ—Å—Ç–∏
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:
–ë—Ä–∞—É–∑–µ—Ä –º–æ–∂–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã JavaScript. –ü—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **Hard Refresh** (Cmd+Shift+R / Ctrl+Shift+F5)
- –ò–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Network ‚Üí –æ—Ç–º–µ—Ç—å—Ç–µ "Disable cache"

### Debug –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
–í `CourtRenderer.js` –¥–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –∫–æ—Ä–∑–∏–Ω—ã –≤ –∫–æ–Ω—Å–æ–ª—å:
```
Rim position: world(7.5, 1.2, 3.05) -> screen(x, y)
```

–≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∫–æ—Ä–∑–∏–Ω–∞ —Ä–∏—Å—É–µ—Ç—Å—è –Ω–∞ —ç–∫—Ä–∞–Ω–µ.

---

## üéÆ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã –≤—Å–µ—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
1. –£–±—Ä–∞—Ç—å debug-–ª–æ–≥–∏ –∏–∑ –∫–æ–¥–∞
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª (–±—Ä–æ—Å–æ–∫ ‚Üí –æ—á–∫–æ ‚Üí –ø–æ–¥–±–æ—Ä)
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å AI –ø–æ–≤–µ–¥–µ–Ω–∏–µ
4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è—Ö —ç–∫—Ä–∞–Ω–∞

---

**–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã. –ò–≥—Ä–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é —Å Hard Refresh –±—Ä–∞—É–∑–µ—Ä–∞.**

